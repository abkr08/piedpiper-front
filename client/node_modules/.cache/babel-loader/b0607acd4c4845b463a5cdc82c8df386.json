{"ast":null,"code":"import _objectSpread from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/src/components/ChatScreenBar/ChatScreenBar.js\";\nimport React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport classes from './ChatScreenBar.module.css';\nimport Modal from '../../containers/Modal/Modal';\nimport Call from '../../containers/Call/Call';\nimport OptionsDropbar from '../UI/OptionsDropbar/OptionsDropbar';\n\nvar ChatScreenBar =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(ChatScreenBar, _Component);\n\n  function ChatScreenBar() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, ChatScreenBar);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(ChatScreenBar)).call.apply(_getPrototypeOf2, [this].concat(args)));\n    _this.state = {\n      showModal: false,\n      isVideo: false,\n      callType: '',\n      showOptions: false,\n      position: {}\n    };\n\n    _this.onVideoCallInit = function () {\n      _this.setState({\n        showModal: true,\n        callType: 'video',\n        isVideo: true\n      });\n    };\n\n    _this.onVoiceCallInit = function () {\n      _this.setState({\n        showModal: true,\n        isVideo: false,\n        callType: 'audio'\n      });\n    };\n\n    _this.showOptions = function (event) {\n      var pos = _objectSpread({}, _this.state.position);\n\n      pos.x = event.clientX;\n      pos.y = event.clientY;\n\n      _this.setState({\n        showOptions: true,\n        position: pos\n      });\n    };\n\n    _this.hideOptions = function () {\n      _this.setState({\n        showOptions: false,\n        position: {}\n      });\n    };\n\n    _this.endCall = function () {\n      _this.setState({\n        showModal: false\n      });\n\n      console.log('modal should close');\n    };\n\n    return _this;\n  }\n\n  _createClass(ChatScreenBar, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate() {\n      if (this.props.callEnded && this.state.showModal) {\n        this.setState({\n          showModal: false\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var optionsDropbar = null;\n\n      if (this.state.showOptions) {\n        optionsDropbar = React.createElement(OptionsDropbar, {\n          hideOptions: this.hideOptions,\n          position: this.state.position,\n          show: this.state.showOptions,\n          options: [{\n            name: 'Contact info'\n          }, {\n            name: 'Select messages'\n          }, {\n            name: 'Mute'\n          }, {\n            name: 'Clear messages'\n          }, {\n            name: 'Delete chat'\n          }],\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 48\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: classes.ChatScreenBar,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, React.createElement(\"img\", {\n        src: \"https://ichef.bbci.co.uk/images/ic/720x405/p0517py6.jpg\",\n        alt: \"\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62\n        },\n        __self: this\n      }), React.createElement(\"span\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63\n        },\n        __self: this\n      }, this.props.room.name)), React.createElement(\"div\", {\n        className: classes.FA,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 65\n        },\n        __self: this\n      }, this.props.room.isPrivate && React.createElement(React.Fragment, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        onClick: this.onVideoCallInit,\n        className: \"fa fa-video\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66\n        },\n        __self: this\n      }), React.createElement(\"i\", {\n        onClick: this.onVoiceCallInit,\n        className: \"fa fa-phone\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67\n        },\n        __self: this\n      })), React.createElement(\"i\", {\n        className: \"fa fa-ellipsis-v\",\n        onClick: function onClick(event) {\n          return _this2.showOptions(event);\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 70\n        },\n        __self: this\n      }), optionsDropbar), React.createElement(Modal, {\n        show: this.state.showModal,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73\n        },\n        __self: this\n      }, this.state.callType ? React.createElement(Call, {\n        callTo: this.props.room.name,\n        closeModal: this.endCall,\n        callType: this.state.callType,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 75\n        },\n        __self: this\n      }) : null));\n    }\n  }]);\n\n  return ChatScreenBar;\n}(Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    callEnded: state.call.callEnded\n  };\n};\n\nexport default connect(mapStateToProps)(ChatScreenBar);","map":{"version":3,"sources":["/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/src/components/ChatScreenBar/ChatScreenBar.js"],"names":["React","Component","connect","classes","Modal","Call","OptionsDropbar","ChatScreenBar","state","showModal","isVideo","callType","showOptions","position","onVideoCallInit","setState","onVoiceCallInit","event","pos","x","clientX","y","clientY","hideOptions","endCall","console","log","props","callEnded","optionsDropbar","name","room","FA","isPrivate","mapStateToProps","call"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\nimport { connect } from 'react-redux';\nimport classes from './ChatScreenBar.module.css';\nimport Modal from '../../containers/Modal/Modal';\nimport Call from '../../containers/Call/Call';\nimport OptionsDropbar from '../UI/OptionsDropbar/OptionsDropbar';\n\n\nclass ChatScreenBar extends Component {\n    state = {\n        showModal: false,\n        isVideo: false,\n        callType: '',\n        showOptions: false,\n        position: {}\n    }\n    \n    onVideoCallInit = () => {\n            this.setState({showModal: true, callType: 'video', isVideo: true});\n    }\n\n    onVoiceCallInit = () => {\n        this.setState({showModal: true, isVideo: false, callType: 'audio'});\n    }\n\n    showOptions = event => {\n        let pos = {...this.state.position};\n        pos.x = event.clientX;\n        pos.y = event.clientY;\n        this.setState({showOptions: true, position: pos})\n    }\n    hideOptions = () => {\n        this.setState({showOptions: false, position:{}})\n    }\n    componentDidUpdate(){\n        if (this.props.callEnded && this.state.showModal){\n            this.setState({showModal: false});\n        }\n    }\n\n    endCall = () => {\n        this.setState({showModal: false})\n        console.log('modal should close')\n    }\n    render() {\n        let optionsDropbar = null;\n        if (this.state.showOptions){\n           optionsDropbar = <OptionsDropbar hideOptions={this.hideOptions} \n                                position={this.state.position} \n                                show={this.state.showOptions} \n                                options={[{name: 'Contact info'},\n                                {name: 'Select messages'},\n                                {name: 'Mute'},\n                                {name: 'Clear messages'},\n                                {name: 'Delete chat'}\n                                ]}/>\n              \n        }\n        return (\n            <div className={classes.ChatScreenBar}>\n            <div>\n                   <img src='https://ichef.bbci.co.uk/images/ic/720x405/p0517py6.jpg' alt=''/>\n                   <span>{this.props.room.name}</span>\n               </div>\n               <div className={classes.FA}>\n                    {  this.props.room.isPrivate &&  <React.Fragment><i onClick={this.onVideoCallInit} className=\"fa fa-video\"></i>\n                    <i onClick={this.onVoiceCallInit} className=\"fa fa-phone\"></i>\n                    </React.Fragment>\n                    }\n                    <i className='fa fa-ellipsis-v' onClick={event => this.showOptions(event)}></i>\n                    {optionsDropbar}\n               </div>\n               <Modal show={this.state.showModal}>\n                    {this.state.callType ? \n                        <Call callTo={this.props.room.name} closeModal={this.endCall} callType={this.state.callType}/> : \n                        null\n                    }\n                </Modal>\n            </div>\n        )\n    } \n}\nconst mapStateToProps = state => {\n    return {\n        callEnded: state.call.callEnded\n    }\n}\n export default connect(mapStateToProps)(ChatScreenBar);"]},"metadata":{},"sourceType":"module"}
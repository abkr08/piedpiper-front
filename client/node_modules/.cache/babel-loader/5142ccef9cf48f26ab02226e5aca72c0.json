{"ast":null,"code":"import * as actionTypes from '../actions';\nimport axios from '../../../Axios';\n\nvar logInSuccess = function logInSuccess(token, userId) {\n  return {\n    type: actionTypes.LOG_IN,\n    token: token,\n    userId: userId\n  };\n};\n\nexport var onLogIn = function onLogIn(data) {\n  return function (dispatch) {\n    axios.post(\"/login\", data).then(function (res) {\n      var userId = res.data.userId;\n      console.log(userId);\n      localStorage.setItem(\"token\", res.data.token);\n      localStorage.setItem(\"userId\", userId);\n      dispatch(logInSuccess(res.data.token, userId));\n      setTimeout(onAuthExpiration, data.expiresIn);\n    }).catch(function (err) {\n      dispatch(logInFailed(err));\n    });\n  };\n};\n\nvar logInFailed = function logInFailed(err) {\n  return {\n    type: actionTypes.LOG_IN_FAILED,\n    error: err\n  };\n};\n\nvar logout = function logout() {\n  return {\n    type: actionTypes.LOG_OUT\n  };\n};\n\nexport var onLogout = function onLogout() {\n  return function (dispatch) {\n    //delete token saved in local storage\n    localStorage.removeItem(\"token\");\n    localStorage.removeItem(\"userId\");\n    dispatch(logout());\n  };\n};\n\nvar auth = function auth(token, userId) {\n  return {\n    type: actionTypes.ON_AUTH,\n    token: token,\n    userId: userId\n  };\n};\n\nexport var onAuth = function onAuth() {\n  return function (dispatch) {\n    var token = localStorage.getItem('token');\n    var userId = localStorage.getItem('userId');\n\n    if (token) {\n      dispatch(auth(token, userId));\n    }\n  };\n};\n\nvar registered = function registered() {\n  return {\n    type: actionTypes.ON_REGISTER\n  };\n};\n\nvar registrationFailed = function registrationFailed(err) {\n  return {\n    type: actionTypes.ON_REGISTRATION_FAILED,\n    error: err\n  };\n};\n\nexport var onRegister = function onRegister(data) {\n  return function (dispatch) {\n    axios.post(\"/register\", data).then(function (res) {\n      dispatch(registered());\n    }).catch(function (err) {\n      dispatch(registrationFailed());\n    });\n  };\n};","map":{"version":3,"sources":["/Users/gotzil/Downloads/social-media/client/src/store/actions/actionCreators/authActionCreators.js"],"names":["actionTypes","axios","logInSuccess","token","userId","type","LOG_IN","onLogIn","data","dispatch","post","then","res","console","log","localStorage","setItem","setTimeout","onAuthExpiration","expiresIn","catch","err","logInFailed","LOG_IN_FAILED","error","logout","LOG_OUT","onLogout","removeItem","auth","ON_AUTH","onAuth","getItem","registered","ON_REGISTER","registrationFailed","ON_REGISTRATION_FAILED","onRegister"],"mappings":"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","sourcesContent":["import * as actionTypes from '../actions';\nimport axios from '../../../Axios';\n\nconst logInSuccess = (token, userId) => {\n    return {\n        type: actionTypes.LOG_IN,\n        token: token, \n        userId: userId\n    }\n}\nexport const onLogIn = (data) => {\n    return dispatch => {\n        axios.post(\"/login\", data)\n         .then(res => {\n           const { userId } = res.data;\n           console.log(userId);\n           localStorage.setItem(\"token\", res.data.token);\n           localStorage.setItem(\"userId\", userId);\n           dispatch(logInSuccess(res.data.token, userId));\n           setTimeout(onAuthExpiration, data.expiresIn)\n         })\n         .catch(err => {\n             dispatch(logInFailed(err))\n         })\n    }\n}\nconst logInFailed = err => {\n    return {\n        type: actionTypes.LOG_IN_FAILED,\n        error: err \n    }\n}\nconst logout = () => {\n    return {\n        type: actionTypes.LOG_OUT\n    }\n}\n\nexport const onLogout = () => {\n    return dispatch => {\n        //delete token saved in local storage\n        localStorage.removeItem(\"token\");\n        localStorage.removeItem(\"userId\");\n        dispatch(logout());\n    }\n}\n\nconst auth = (token, userId) => {\n    return {\n        type: actionTypes.ON_AUTH,\n        token: token,\n        userId: userId\n    }\n}\nexport const onAuth = () => {\n    return dispatch => {\n        let token = localStorage.getItem('token');\n        let userId= localStorage.getItem('userId');\n        if(token){\n            dispatch(auth(token, userId));\n        }\n    }\n}\nconst registered = () => {\n    return {\n        type: actionTypes.ON_REGISTER,\n        \n    }\n}\nconst registrationFailed = err => {\n    return {\n        type: actionTypes.ON_REGISTRATION_FAILED,\n        error: err\n    }\n}\nexport const onRegister = data => {\n    return dispatch => {\n        axios.post(\"/register\", data)\n            .then(res => {\n                dispatch(registered())\n            })\n            .catch(err => {\n                dispatch(registrationFailed())\n            });\n    }\n}"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/src/containers/PiperChat/Contact.js\";\nimport React, { useState, useEffect } from 'react';\nimport classes from './Contact.module.css';\nimport img from '../../assets/images/p37605.png';\nimport { connect } from 'react-redux';\nimport OptionsDropbar from '../../components/UI/OptionsDropbar/OptionsDropbar';\n\nvar contact = function contact(props) {\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      showOptions = _useState2[0],\n      toggleShowOptions = _useState2[1];\n\n  var _useState3 = useState({}),\n      _useState4 = _slicedToArray(_useState3, 2),\n      position = _useState4[0],\n      updatePosition = _useState4[1];\n\n  var _useState5 = useState(''),\n      _useState6 = _slicedToArray(_useState5, 2),\n      name = _useState6[0],\n      setName = _useState6[1];\n\n  var contactName = props.room.userIds.filter(function (username) {\n    return username !== props.user;\n  }).join('');\n  console.log(contactName);\n\n  var showOptionsHandler = function showOptionsHandler(event) {\n    var pos = {};\n    pos.x = event.clientX + 200;\n    pos.y = event.clientY;\n    toggleShowOptions(true);\n    updatePosition(pos);\n  };\n\n  var hideOptions = function hideOptions() {\n    toggleShowOptions(false);\n    updatePosition({});\n  };\n\n  var getRoomName =\n  /*#__PURE__*/\n  function () {\n    var _ref = _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var contactName;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return props.room.userIds.filter(function (user) {\n                return user !== props.userId;\n              });\n\n            case 2:\n              contactName = _context.sent;\n              console.log(contactName);\n\n            case 4:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    return function getRoomName() {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  useEffect(function () {\n    // if(props.room.isPrivate && contactName){\n    //     console.log(props.room.userIds)\n    //     setName(contactName);\n    // } else {\n    //     setName(props.room.name);\n    // }\n    getRoomName();\n  }); // setInterval(()=> console.log(name), 1000)\n\n  var attachedClasses = [classes.Contact];\n  var unreadMessages = \"\";\n\n  if (props.Active) {\n    attachedClasses.push(classes.Active);\n  }\n\n  if (props.unopenedMessages[props.id]) {\n    unreadMessages = props.unopenedMessages[props.id].length;\n  }\n\n  var contact = null;\n\n  if (name !== '') {\n    contact = React.createElement(\"div\", {\n      className: attachedClasses.join(' '),\n      onClick: props.clicked,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, React.createElement(\"img\", {\n      src: img,\n      alt: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, name), React.createElement(\"p\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, props.lastMessage)), React.createElement(\"div\", {\n      className: classes.FloatedRight,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 55\n      },\n      __self: this\n    }, unreadMessages), React.createElement(\"i\", {\n      onClick: showOptionsHandler,\n      className: \"fa fa-angle-down\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 56\n      },\n      __self: this\n    }), showOptions && React.createElement(OptionsDropbar, {\n      position: position // optionClicked={(event, option) => this.optionClicked(option)}\n      ,\n      roomId: props.room.id,\n      show: showOptions,\n      hideOptions: hideOptions,\n      options: [{\n        name: 'Archive chat'\n      }, {\n        name: 'Mute'\n      }, {\n        name: !props.room.isPrivate ? 'Exit group' : 'Delete chat'\n      }, {\n        name: 'Pin chat'\n      }, {\n        name: 'Mark as unread'\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    })));\n  }\n\n  return contact;\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userId: state.auth.userId\n  };\n};\n\nexport default connect(mapStateToProps)(contact);","map":{"version":3,"sources":["/Users/Gotzil/Desktop/React/PiperChat/piedpiper/client/src/containers/PiperChat/Contact.js"],"names":["React","useState","useEffect","classes","img","connect","OptionsDropbar","contact","props","showOptions","toggleShowOptions","position","updatePosition","name","setName","contactName","room","userIds","filter","username","user","join","console","log","showOptionsHandler","event","pos","x","clientX","y","clientY","hideOptions","getRoomName","userId","attachedClasses","Contact","unreadMessages","Active","push","unopenedMessages","id","length","clicked","lastMessage","FloatedRight","isPrivate","mapStateToProps","state","auth"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport classes from './Contact.module.css';\nimport img from '../../assets/images/p37605.png'\nimport { connect } from 'react-redux';\nimport OptionsDropbar from '../../components/UI/OptionsDropbar/OptionsDropbar'\n\nconst contact = props => {\n    const [showOptions, toggleShowOptions] = useState(false);\n    const [position, updatePosition] = useState({});\n    const [name, setName] = useState('');\n    const contactName = props.room.userIds.filter(username => username !== props.user).join('');\n    console.log(contactName)\n    const showOptionsHandler = event => {\n        let pos = {};\n        pos.x = event.clientX + 200;\n        pos.y = event.clientY;\n        toggleShowOptions(true);\n        updatePosition(pos)\n    }\n    const hideOptions = () => {\n        toggleShowOptions(false);\n        updatePosition({})\n    }\n    const getRoomName = async () => {\n        let contactName = await props.room.userIds.filter(user => user !== props.userId);\n        console.log(contactName);\n    } \n    useEffect(()=> {\n        // if(props.room.isPrivate && contactName){\n        //     console.log(props.room.userIds)\n        //     setName(contactName);\n        // } else {\n        //     setName(props.room.name);\n        // }\n        getRoomName();\n    });\n    // setInterval(()=> console.log(name), 1000)\n    let attachedClasses = [classes.Contact];\n    let unreadMessages = \"\";\n    if (props.Active){\n        attachedClasses.push(classes.Active); \n    }\n    if (props.unopenedMessages[props.id]){\n        unreadMessages = props.unopenedMessages[props.id].length;\n    }\n    let contact = null;\n    if (name !== ''){\n        contact = (<div className={attachedClasses.join(' ')} onClick={props.clicked}>\n        <img src={img} alt=''/>\n        <div>\n            <p>{name}</p>\n            <p>{props.lastMessage}</p>\n        </div>\n        <div className={classes.FloatedRight}>\n            <span>{unreadMessages}</span>\n            <i onClick={showOptionsHandler} className=\"fa fa-angle-down\"></i>\n            { showOptions && \n                <OptionsDropbar position={position} \n                        // optionClicked={(event, option) => this.optionClicked(option)}\n                        roomId={props.room.id}\n                        show={showOptions} \n                        hideOptions={hideOptions}\n                        options={[{name: 'Archive chat'},\n                        {name: 'Mute'},\n                        {name: !props.room.isPrivate? 'Exit group':'Delete chat'},\n                        {name: 'Pin chat'},\n                        {name: 'Mark as unread'}\n                        ]}/>}\n        </div>\n    </div>\n        )\n    }\n    return contact; \n}\nconst mapStateToProps = state => {\n    return {\n         userId: state.auth.userId\n    }\n}\nexport default connect(mapStateToProps)(contact);"]},"metadata":{},"sourceType":"module"}